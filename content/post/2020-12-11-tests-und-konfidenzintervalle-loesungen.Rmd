---
title: Tests und Konfidenzintervalle - Lösungen
author: 
date: '2020-12-11'
slug: tests-und-konfidenzintervalle-loesungen
categories:
  - BSc2
tags:
  - t-Test
subtitle: ''
summary: ''
authors: [scheppa-lahyani]
lastmod: '2020-12-11T19:09:16+01:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
expiryDate: '2022-09-15'
publishDate: '2021-12-03'
---

## Vorbereitung

Laden Sie zun?chst den Datensatz `fb21` von der pandar-Website.

```{r}
fb21 <- read.table('https://pandar.netlify.app/post/fb21.csv', 
                   header = TRUE,
                   sep = ',',
                   na.strings = 'NA',
                   stringsAsFactors = F)
```

Alternativ k?nnen Sie die fertige R-Daten-Datei [<i class="fas fa-download"></i> hier herunterladen](/post/fb21.rda). Die Bedeutung der einzelnen Variablen und ihre Antwortkategorien k?nnen Sie dem Dokument [Variablen?bersicht.docx](/post/variablen.pdf) entnehmen.

Pr?fen Sie zur Sicherheit, ob alles funktioniert hat:

```{r}
dim(fb21)
str(fb21)
```

Der Datensatz besteht aus `r nrow(fb21)` Zeilen (Beobachtungen) und `r ncol(fb21)` Spalten (=Variablen).

***

## Installieren aller wichtigen Packages

```{r, eval=F}
install.packages("psych")
install.packages("nortest")
install.packages("car")
```
```{r}
library(psych)
library(nortest)
library(car)

load('fb21.rda')
```

## Aufgabe 1

**Die mittlere Lebenszufriedenheit (`lz`) in Deutschland liegt bei $\mu$ = 4.7.**

**1.1 Was ist der Mittelwert ($\bar{x}$), die Standardabweichung (*SD*, $\hat\sigma$) und der Standardfehler ($\sigma_{\bar{x}}$) der Lebenszufriedenheit in der Gruppe der Psychologie-Studierenden?**

**Variante 1**:

```{r}
mean.lz <- mean(fb21$lz, na.rm = T) #Mittelwert
mean.lz

sd.lz <- sd(fb21$lz, na.rm = T) #Standardabweichung
sd.lz

n.lz <- length(na.omit(fb21$lz)) #Stichprobengroesse
se.lz <- sd.lz/sqrt(n.lz) #Standardfehler
se.lz
```

**Variante 2**:

```{r}
describe(fb21$lz) #Funktion aus Paket "psych"
```

**1.2 Sind die Lebenszufriedenheitswerte normalverteilt? Veranschaulichen Sie dies mit einem geeigneten Plot. Benutzen Sie die qqPlot-Funktion aus dem car-Paket sowie die lillie.test-Funktion aus dem nortest-Paket. Wie unterscheiden sie sich? Wann kann man in diesem Fall von einer Normalverteilung ausgehen?**

```{r}
#geeigneter Plot: QQ-Plot. Alle Punkte sollten auf einer Linie liegen.
qqnorm(fb21$lz)
qqline(fb21$lz)

#Die qqPlot-Funktion zeichnet ein Konfidenzintervall in den QQ-Plot. Dies macht es fuer den Betrachter einfacher zu entscheiden, ob alle Punkte in etwa auf einer Linie liegen. Die Punkte sollten nicht ausserhalb der blauen Linien liegen.
qqPlot(fb21$lz)

#Der Lillie-Test (Kolmogorov-Smirnov Test) testet die H0, dass eine Normalverteilung vorliegt. Daher sollte der Test nicht signifikant sein
lillie.test(fb21$lz)
```
Sowohl der QQ-Plot als auch der Lilliefors-Test pruefen die Daten auf Normalverteilung, wobei der QQ-Plot grafisch und der Lilliefors-Test inferenzstatistisch vorgeht. Beides weist darauf hin, dass die Daten **nicht** normalverteilt sind.

**1.3 Unterscheidet sich die Lebenszufriedenheit der Psychologie-Studierenden von der Lebenszufriedenheit der Gesamtbevoelkerung ($\mu$ = 4.7)? Bestimmen Sie das 99%ige Konfidenzintervall.**

Da die Varianz der Grundgesamtheit nicht bekannt ist, wird ein t-Test herangezogen.
Obwohl keine Normalverteilung vorliegt, können wir aufgrund des *zentralen Grenzwertsatzes* trotzdem einen t-Test rechnen.

**Hypothesengenerierung:**

$\alpha$ = .05 

$H_0$: Die durchschnittliche Lebenzufriedenheit der Psychologie-Studierenden $\mu_1$ unterscheidet sich nicht von der Lebenszufriedenheit der Gesamtbevoelkerung $\mu_0$.

$H_0$: $\mu_0$ $=$ $\mu_1$

$H_1$: Die durchschnittliche Lebenzufriedenheit der Psychologie-Studierenden $\mu_1$ unterscheidet sich von der Lebenszufriedenheit der Gesamtbevoelkerung $\mu_0$.

$H_1$: $\mu_0$ $\neq$ $\mu_1$

```{r}
t.test(fb21$lz, mu=4.7)
t.test(fb21$lz, mu=4.7, conf.level = 0.99) #Default ist 95%, deshalb erhoehen wir auf 99%
```

Mit einer Irrtumswahrscheinlichkeit von 5% kann die $H_0$ verworfen werden. Die Psychologie-Studierenden unterscheiden sich in ihrer Lebenszufriedenheit von der Gesamtbevoelkerung. 

## Aufgabe 2

**Die durchschnittliche Abschlussnote im Fach Psychologie (Bachelor) ist 2.01 (*SD* = 0.57). Eine Forschungsgruppe vermutet, dass sich die durchschnittliche Abschlussnote ueber die Jahre veraendert hat und nun besser ist. Um dies zu ueberpruefen, untersucht die Forschergruppe eine zufuellige Stichprobe aus 140 Psychologie-Studierenden (*N* = 140). Sie ermitteln eine durchschnittliche Abschlussnote von 1.81.**

**2.1 Reicht diese Information aus, um nachzuweisen, dass sich die durchschnittliche Abschlussnote veraendert hat? Berechnen Sie wenn moeglich, ob es eine Veraenderung gab ($\alpha$ = .05).**

Ja, diese Informationen reichen aus. Die Standardabweichung der Stichprobe wird nicht benoetigt.

**Hypothesengenerierung:**

$\alpha$ = .05 

$H_0$: Die durchschnittliche Abschlussnote der Psychologie-Studierenden $\mu_1$ ist schlechter oder gleich gross wie zuvor ($\mu_0$).

$H_0$: $\mu_0$ $\leq$ $\mu_1$

$H_1$: Die durchschnittliche Abschlussnote der Psychologie-Studierenden $\mu_1$ ist besser als zuvor ($\mu_0$).

$H_1$: $\mu_0$ $>$ $\mu_1$

```{r}
mean.note <- 2.01 #Mittelwert alt
mean.sd <- 0.57 #Standardabweichung alt
n.new.note <- 140 #Stichprobengroesse
new.mean.note <- 1.81 #Mittelwert neu
se.mean.note <- 0.57/sqrt(n.new.note) #Standardfehler
z.note <- abs((new.mean.note-mean.note)/se.mean.note) #empirischer z-Wert
z.note

z_krit <- qnorm(1-.05) #kritischer z-Wert
z_krit

z.note > z_krit #Signifikanzentscheidung
```

Mit einer Irrtumswahrscheinlichkeit von 5% wird die $H_0$ (keine Veraenderung) verworfen. Die Abschlussnote hat sich ueber die Jahre verbessert.

**2.2 Wieviel Prozent der damaligen Fälle hatten eine bessere Abschlussnote als die neue ermittelte Abschlussnote von 1.81?**

```{r}
pnorm(q = 1.81, mean = 2.01,sd = .57, lower.tail = T)*100
```

Nur 36.28% der Fälle hatten eine bessere Abschlussnote als 1.81. Dies unterstützt das Ergebnis, dass sich der neue Wert von dem bisherigen Mittelwert unterscheidet.   

## Aufgabe 3

**3.1 Unterscheiden sich die Extraversionswerte (`extra`) der Studierenden der Psychologie (1. Semester) von den Extraversionswerten der Gesamtbevoelkerung ($\mu$ = 3.5)? Bestimmen Sie das 95%ige Konfidenzintervall und die Effektgroesse.**

**Hypothesengenerierung:**

$\alpha$ = .05 

$H_0$: Die durchschnittlichen Extraversionswerte der Psychologie-Studierenden $\mu_1$ unterscheiden sich nicht von den Werten der Gesamtbevoelkerung $\mu_0$.

$H_0$: $\mu_0$ $=$ $\mu_1$

$H_1$: Die durchschnittlichen Extraversionswerte der Psychologie-Studierenden $\mu_1$ unterscheiden sich von den Werten der Gesamtbevoelkerung $\mu_0$.

$H_1$: $\mu_0$ $\neq$ $\mu_1$

```{r}
t.test(fb21$extra, mu=3.5)
```

Mit einer Irrtumswahrscheinlichkeit von 5% kann die $H_0$ verworfen werden. Die Psychologie-Studierenden unterscheiden sich in ihrer Extraversion von der Gesamtbevoelkerung. 
Das 95%-ige Konfidenzintervall liegt zwischen 3.22 und 3.49. Das bedeutet, dass in 95% der Fälle in einer wiederholten Ziehung aus der Grundgesamtheit die mittleren Vertraeglichkeitswerte zwischen 3.22 und 3.49 liegen.

**Effektgroesse:**

```{r}
mean_extra <- mean(fb21$extra, na.rm = T) #MW der Stichprobe
sd_extra <- sd(fb21$extra, na.rm = T) #Stichproben SD (Populationsschaetzer)
mean_Popu_extra <- 3.5 #MW der Grundgesamtheit
d1 <- abs((mean_extra - mean_Popu_extra)/sd_extra) #abs(), da Betrag
d1
```

Die Effektgroesse ist als klein einzuordnen.

**3.2 Sind die Nerdiness-Werte (`nerd`) der Psychologie-Studierenden (1. Semester) groesser als die Nerdiness-Werte der Gesamtbevoelkerung ($\mu$ = 2.9)? Bestimmen Sie das 99%ige Konfidenzintervall und die Effektgroesse.**

**Hypothesengenerierung:**

$\alpha$ = .05 

$H_0$: Die durchschnittlichen Nerdiness-Werte der Psychologie-Studierenden $\mu_1$ sind geringer oder gleich gross wie die Werte der Gesamtbevoelkerung $\mu_0$.

$H_0$: $\mu_0$ $\geq$ $\mu_1$

$H_1$: Die durchschnittlichen Nerdiness-Werte der Psychologie-Studierenden $\mu_1$ sind groesser als die Werte der Gesamtbevoelkerung $\mu_0$.

$H_1$: $\mu_0$ $<$ $\mu_1$

```{r}
t.test(fb21$nerd, mu=2.9, alternative="greater", conf.level = 0.99)
```

Mit einer Irrtumswahrscheinlichkeit von 5% kann die $H_0$ verworfen und die $H_1$ angenommen werden. Die Psychologie-Studierenden haben hoehere Nerdiness-Werte im Vergleich zur Gesamtbevoelkerung.
Mit einer 99%-igen Wahrscheinlichkeit liegt der wahre Nerdiness-Wert $\mu$ zwischen 2.96 und Inf (Ausserhalb des definierten Wertebereichs).

**Effektgroesse:**

```{r}
mean_nerd <- mean(fb21$nerd, na.rm = T) #MW der Stichprobe
sd_nerd <- sd(fb21$nerd, na.rm = T) #Stichproben SD (Populationsschaetzer)
mean_Popu_nerd <- 2.9 #MW der Grundgesamtheit
d2 <- abs((mean_nerd - mean_Popu_nerd)/sd_nerd) #abs(), da Betrag
d2
```

Die Effektgroesse ist als klein bis mittel einzuordnen.

**3.3 Sind die Psychologie-Studierenden (1. Semester) vertraeglicher (`vertr`) als die Grundgesamtheit ($\mu$ = 3.9)? Bestimmen Sie das 95%ige Konfidenzintervall und die Effektgroesse.**

**Hypothesengenerierung:**

$\alpha$ = .05 

$H_0$: Die durchschnittlichen Vertraeglichkeitswerte der Psychologie-Studierenden $\mu_1$ sind geringer oder gleich gross wie die Werte der Gesamtbevoelkerung $\mu_0$.

$H_0$: $\mu_0$ $\geq$ $\mu_1$

$H_1$: Die durchschnittlichen Vertraeglichkeitswerte der Psychologie-Studierenden $\mu_1$ sind groesser als die Werte der Gesamtbevoelkerung $\mu_0$.

$H_1$: $\mu_0$ $<$ $\mu_1$

```{r}
t.test(fb21$vertr, mu=3.9, alternative = "greater")
```

Mit einer Irrtumswahrscheinlichkeit von 5% kann die $H_0$ verworfen und die $H_1$ angenommen werden. Die Psychologie-Studierenden haben hoehere Vertraeglichkeitswerte im Vergleich zur Gesamtbevoelkerung.
Das 95%-ige Konfidenzintervall liegt zwischen 4.09 und Inf (Ausserhalb des definierten Wertebereichs). Das bedeutet, dass in 95% der Fälle in einer wiederholten Ziehung aus der Grundgesamtheit die mittleren Vertraeglichkeitswerte zwischen 4.09 und Inf (Ausserhalb des definierten Wertebereichs) liegen.

**Effektgroesse:**

```{r}
mean_vertr <- mean(fb21$vertr, na.rm = T) #MW der Stichprobe
sd_vertr <- sd(fb21$vertr, na.rm = T) #Stichproben SD (Populationsschaetzer)
mean_Popu_vertr <- 3.9 #MW der Grundgesamtheit
d3 <- abs((mean_vertr - mean_Popu_vertr)/sd_vertr) #abs(), da Betrag
d3
```

Die Effektgroesse ist als mittel bis hoch einzuordnen.
