---
title: formr - FAQ
author: 
date: '2022-01-18'
slug: formr-faq
categories:
  - BSc2
tags:
  - formr
subtitle: ''
summary: ''
authors: [cezanne, lawetzky, nehler, schultze]
lastmod: '2022-01-18T13:13:57+01:00'
featured: no
header:
  image: "/header/faq.jpg"
  caption: "[Courtesy of pxhere](https://pxhere.com/en/photo/1437981)"
projects: []
---

```{r setup, cache = FALSE, echo = FALSE}
knitr::opts_chunk$set(error = TRUE)
```


In diesem Tutorial soll gezeigt werden, wie Sie mit Hilfe von formr Umfragen erstellen können. Das Tutorial soll Sie dabei speziell auf die Anforderungen vorbereiten, die sich Ihnen im Rahmen Ihrer Gruppenarbeit in PsyBSc2 stellen werden. Wir präsentieren die Funktionsweise von formr anhand einer abgewandelten und auch verkürzten Version des Fragebogens, welchen Sie in der ersten Woche im Praktikum selbst ausgefüllt haben.

## 1. Schritt Anmeldung formr

Um einen Fragebogen zu erstellen, braucht eine Person eurer Gruppe einen Account bei formr. Eine Anmeldung ist derzeit nur über diesen [Link](https://workshops.formr.org/) und unter Angabe des Referall-Tokens, den Sie im Praktikum erhalten, möglich.

## 2. Schritt Anfragen von Adminrechten
(ist dafür nicht der Token?) -> JA

Zudem benötigt der formr-Account Adminrechte, um Fragebögen zu erstellen. Dafür müssen wir eine Email an [formr](mailto:accounts@formr.org) schreiben, in der wir Adminrechte für unseren Account anfragen. In der Regel sollten wir eine Antwort erhalten, sobald wir die Adminrechte erhalten haben. Man kann die Änderung auch daran erkennen, dass man nach dem Einloggen in formr in der oberen Leiste ein Feld mit "Admin" sieht.

![](/post/Zu_Admin.jpg)


## 3. Schritt Spreadsheet erstellen

Fragebögen lassen sich bei formr über Spreadsheets erstellen. Wir müssen also eine Tabelle erstellen, die wir dann in unserem Account hochladen, damit formr eine optisch ansprechende Umfrage daraus erstellt. Die Tabelle kann mit einem Tabellenprogramm, wie Excel, Gnumeric oder auch mit einem etwaigen Google Account über Google Sheets erstellt werden. Wichtig ist nur, dass wir ein zeitgemäßes Dateiformat nutzen, wie das XLSX-Format (das XLS-Format ist zum Beispielt veraltet). Außerdem darf die Datei im Namen keine Leerzeichen haben. Ein Dateiname wie “tabelle 1.xlsx” kann zu einem Fehler beim Import führen. Anstelle von Leerzeichen können wir Unterstriche benutzen, z. B. “tabelle_1.xlsx”.

Die erstellte Tabelle sollte folgende Spalten besitzen:

-	Explanation
-	Label
- Class
- Type
- Optional
- Name
- Showif
- Choice1, choice2, ...

Die Spalte `explanantion` ist für Ordnung und das eigene Verständnis da. Hier können wir eigene Notizen hinterlassen, die für die Teilnehmenden nicht sichtbar sind. Bei der Erhebung invertierter Items ist hier ein Vermerk zu empfehlen, damit diese bei der Auswertung nicht übersehen werden.

In der Spalte `class` können visuelle Formatierungen vorgenommen werden. Mit „left900" (bzw. 100, ..., 900) kann so zB ein Inhalt nach rechts eingeschoben werden.

![](/post/01_left900.png)

Mit "mc_width70" (bzw. 50, ... ,100, 150, 200) kann bei multiple choice items der Abstand zwischen den Auswahlmöglichkeiten eingestellt werden und mit "hide_label mc_width70" (bzw. 50, ... ,100, 150, 200) werden die `labels` der Auswahlmöglichkeiten nicht angezeigt. So werden die Auswahlmöglichkeiten hier nur in der Überschrift angezeigt und nicht auch neben den Auswahlkästchen. Die Überschriften werden mit dem `type` "mc_heading" erstellt.

![](/post/02_mc_width.png)

Mit `type` wird die Art des Items festgelegt. Für die Datenschutzerklärung brauchen wir hierbei „note" und „check". Mit "note" wird ein Text dargestellt, den wir in die Spalte `label` schreiben. In der Spalte `label` werden Textelemente geschrieben, die für die Teilnehmenden sichtbar sein sollen.
Zudem müssen die Teilnehmenden der Erklärung zustimmen. Dafür nutzen wir den `type` „check", der eine Box erstellt, die zur Bestätigung angeklickt werden kann (Siehe Schritt 8 wie der restliche Fragebogen nur bei anklicken ausgefüllt werden kann).

![](/post/03_note_check.png)

Sowohl unser Instruktionstext auf Seite 1 als auch der Text im Fragebogen können formatiert werden. Durch die Formatierung wird der Text lesbarer und die wichtigsten Informationen werden hervorgehoben.
Es ist zu empfehlen, mit den üblichen Formatierungsmöglichkeiten (**fett** / *kursiv*) zu arbeiten. Die Befehle für die Formatierung sind glücklicherweise sehr intuitiv. So schreiben wir Text fett, indem wir den Befehl `<strong>` um den Text stellen. Das Ende des fett zu setzenden Textes geben wir mit `</strong>` an. Der Text sieht also so aus:

```
<strong>HIER KOMMT FETTER TEXT</strong>
```

Kursivschrift erreichen wir mit dem Befehl `<em>` (engl. *emphasis* = Betonung). Hier ein Beispiel:

```
<em>HIER KOMMT KURSIVER TEXT</em>
```

Diese beiden Befehle haben jedoch auch eine semantische Bedeutung: Sie heben die Worte hervor bzw. machen sie "stärker". Entsprechend sollten die Befehle `<strong>` und `<em>` sparsam verwendet werden.

Doch was, wenn wir wirklich *nur formatieren* wollen – ohne jede semantische Bedeutung im Code. Dafür können sogenannte präsentationsbezogene Elemente verwendet werden. Diese wurden mit HTML5 eingeführt und können mittlerweile von allen gängigen Browsern interpretiert werden. `<b>` macht den Text fett (engl. *bold*), `<i>` kursiv (engl. *italic*) und `<u>` unterstrichen (engl. *underlined*).

In [Mozzilas Entwickler\*innen-Guide](https://developer.mozilla.org/de/docs/Learn/HTML/Introduction_to_HTML/HTML_text_fundamentals) ist die Funktionsweise der Formatierungsoptionen wie folgt beschrieben:

> `<i>` kursiver Text wird für folgende Aspekte verwendet: Fremdwörter, Taxonomische Begriffe, Fachwörter, Gedanken[.]

> `<b>` fett-gedruckter Text wird für folgende Aspekte verwendet: Stichwörter, Produktnamen, wichtige Sätze[.]

> `<u>` nterstrichener Text wird für folgende Aspekte verwendet: richtige Namen, Rechtschreibfehler[.]

**Tipp:** Mit `<u>` sollte sparsam umgegangen werden. Denn üblicherweise sind Hyperlinks – also verweise auf andere Websites – durch Unterstreichung hervorgehoben.

---

Um Single Choice Items zu erstellen brauchen wir „mc" (Multiple Choice mit "mc_multiple"), wie hier bei den Fragen zur Prokrastination:

![](/post/04_mcitems.png)

Ratingbuttons lassen sich mit dem `type` „rating_button (Min, Max, Step)", wobei Min, Max und Step für das niedrigste Rating, das höchste Rating und die Schrittweite stehen. Bei formr ist Leerzeichen zwischen dem Typ-Namen und etwaigen Argumenten ist notwendig, so würde `rating_button1,5,1` statt `rating_button 1,5,1`zu einer Fehlermeldung führen. 

![](/post/05_ratingbutton.png)

Sollen die Teilnehmenden frei antworten können, ist dies mit "text" möglich.

![](/post/06_text.png)

Weitere mögliche Items finden sie [hier](https://formr.org/public/documentation#available_items)

In der Spalte `optional` können wir mit `*` deutlich machen, dass das Item nicht beantwortet werden muss. Das Item wird dann im Fragebogen als "optional" markiert. Alternativ kann unter `optional` auch definiert werden, dass das Bearbeiten eines Elementes für alle nachfolgenden Elemente erforderlich ist. Dafür kann man einer Variable ein Ausrufezeichen (`!`) einsetzen. Das Ausrufezeichen gibt die Notwendigkeit an. 

In der Spalte `name` wird den Variablen ein Name gegeben. Diese sind für die Teilnehmenden nicht sichtbar. Es handelt sich um die Variablennamen mit denen wir bei R die Auswertung durchführen. Leerzeichen in den Variablennamen in der Spalte `name` sind unzulässig. *R* erlaubt ebenfalls keine Leerzeichen in Variablennamen. Umlaute, Interpunktion und sonstige Sonderzeichen sind ebenfalls unzulässig. Zudem müssen die Variablennamen bzw. Elementnamen eindeutig sein (im Fachjargon spricht man auch von diskret oder eineindeutig). Haben wir bereits eine Variable “Prokrastination”, so können wir kein zweites Element mit diesem Namen versehen. Normalerweise werden die Variablennamen für einzelne Items zu einem Konstrukt deshalb nach dem Schema “prok1”, “prok2” etc. benannt.

Mit `Show if` kann angegeben werden, dass ein Item nur unter einer bestimmten Bedingung angezeigt werden soll.

Mit `choice1`, `choice2`, ... werden die Bezeichnungen für die Antwortmöglichkeiten angegeben. Wichtig ist, dass wir gleich viele `choice`-Optionen vergeben, wie wir Antwortmöglichkeiten haben. Sollten wir bspw. eine Sieben-Punkte-Likert-Skala haben, allerdings nur `choice1` bis `choice6` als Spaltennamen in der Tabelle haben, führt dies zu einem Fehler beim Import. Umgekehrt ist es nicht schlimm, wenn die Spalte choice6 existiert, obwohl wir eine Fünf-Punkt-Likert-Skala verwenden. 
Für die single-choice Frage zum Geschlecht sind die Antwortmöglichkeiten hier „männlich", „weiblich" und „anderes":

![](/post/07_geschlecht_choices.png)

Eine neue Seite lässt sich mit "submit" erstellen.

## 4. Schritt eine Survey erstellen

Sind wir nun mit unserem Spreadsheet zufrieden, können wir mit einem Admin-Account bei formr eine neue Umfrage erstellen, indem wir oben rechts auf die Adminansicht klicken.

![](/post/2020-08-29-problemstellung6_files/Zu_Admin.jpg){width="100%"}
Die Adminansicht sieht so aus:

![](/post/2020-08-29-problemstellung6_files/%C3%9Cbersicht.jpg){width="100%"}

Hier können wir mit `Create Survey` neue Umfragen erstellen. Wir gelangen dann auf diese Seite:

![](/post/2020-08-29-problemstellung6_files/Tabelle_importieren.jpg){width="100%"}

Hier können wir entweder den Link von unserem Google spreadsheet eingeben (rechts) oder eine Tabelle hochladen (links). Auf dem Bild unten können wir sehen, wie es aussieht, wenn das Hochladen funktioniert hat, und dass die `explanations` ignoriert wurden, da diese nur zur eigenen Orientierung dienen. Auf der linken Seite ist der Button `Test Survey`. Hier können wir einen Test-Account erstellen, um die Studie zu testen.

![](/post/Survey_uebersicht.jpg){width="100%"}

## 5. Schritt Umfrage zu Versuchspersonenminuten (VPM) hochladen

Um Versuchspersonenminuten zu vergeben, müssen wir eine weitere Umfrage erstellen. Die Aufteilung in zwei verschiedene Spreadsheets ist essentiell, damit die personenbzogenen Angaben zu den VPMs von den Antworten in dem Gruppenprojekt getrennt werden. Die Vorlage für die Erhebung der Namen und Email-Adressen, die wir für die Ausstellung der VPM benötigen, sind im [Moodle Kurs](https://moodle.studiumdigitale.uni-frankfurt.de/moodle/pluginfile.php/419733/mod_folder/content/0/vpm.ods?forcedownload=1) (der Link führt direkt zum Download, wpbei man dafür in Moodle angemeldet sein muss) zu finden. Dieses Sheet müssen wir herunterladen und lokal abspeichern und auf formr eine weitere Umfrage (wie im vorherigen Punkt beschrieben) mit diesem Dokument erstellen.

## 6. Schritt einen Run erstellen

Für unsere fertige Studie, müssen wir nun einen `Run` erstellen. Runs sind Zusammenstellungen von mehreren Surveys. Wir benötigen Runs in jedem Fall, um unseren Fragebogen – auch wenn dieser nur aus einem Survey besteht – zu veröffentlichen. Wir können so aber unseren Fragebogen mit der VPM-Abfrage verknüpfen. Weitere Informationen zu Runs und den Modulen eines Runs finden Sie in der [formr-Dokumentation](https://formr.org/documentation#more_run). Einen `Run` erstellen wir, indem wir in der Adminansicht auf `Create Run` drücken.

![](/post/run_erstellen.jpg){width="100%"}

Diesem Run müssen wir einen Namen geben, welcher noch nicht vorhanden ist und gelangen somit auf die Übersicht unseres Runs.

![](/post/08_Run_uebersicht.png)

Von diesen Buttons benötigen wir erstmal nur zwei: den ersten und den letzten. Mit dem linken Button können wir eine (oder mehrere) Umfrage(n) einfügen, in diesem Fall die Umfrage für das Gruppenprojekt und die VPM-Abfrage. Der letzte Button zeigt an, dass der Run beendet wird. 

Die weiteren Buttons haben folgende Funktionen: Das zweite Symbol von links, der Pfeil, kann externe Links einfügen und somit auch andere Module mit einbeziehen, wie beispielsweise eine bereits bestehende Umfrage von SoSciSurvey. Mit dem Briefumschlag-Button können wir E-Mails verschicken. Dies ist vor allem bei Langzeitstudien sinnvoll, um die Teilnehmer an kommende Termine zu erinnern. Mit den Pfeilen können Schleifen erstellen, wenn wir z.B. die Stabilität der Big Five herausfinden möchtest und dafür ein Jahr lang jeden Monat unsere Probanden einen Big Five Fragebogen ausfüllen lassen möchten. Außerdem können wir auch Pausen und Wartezeiten hinzufügen. Mit dem Shuffle-Button können dwir unsere Teilnehmenden randomisieren und zu guter Letzt kommt der Stop-Button, mit dem wir das Ende der Studie kennzeichnen. 

Auf der linken Seite finden wir erneut einen Test-Button, mit dem wir schauen können, ob alles nach unseren Vorstellungen funktioniert.

## 7. Schritt Anonymität sicherstellen

Um die Anonymität der Teilnehmenden zu gewährleisten, müssen wir noch sicherstellen, dass keine Log-Daten aufgezeichnet werden und die Daten nicht in der gleichen Reihenfolge sind, wie in der eigentlichen Umfrage. Um das zu ermöglichen, gehen wir über den Menü-Punkt `Surveys` wieder zu der Versuchspersonenminuten-Umfrage:

![](/post/09_Vpm_umfrage.png)

Dort sollten wir auf der unten dargestellten Seite mit den Einstellungen dieses Fragebogens landen. Falls dem nicht so sein sollte, nutzen wir links den Button `Settings`.

Um die Anonymität der Teilnehmenden zu gewährleisten, setzen wir in den Einstellungen das Häkchen bei `Unlink Survey` und speichern die Änderung:

![](/post/10_Anonymitaet_vpm_umfrage.png)

Wir werden hier darauf hingewiesen, dass wir diesen Schritt nicht rückgngig machen können (logisch, sonst könnten wir die Anonymität unserer Teilnehmenden ja im Nachhinein wieder aufheben). Es müssen dann mindestens 10 Personen an unserer Umfrage teilnehmen, bevor wir die Ergebnisse bezüglich der VPM einsehen können.


## 8. Schritt Anzeigen des Fragebogens nur bei Consent

Wir wollen, dass der Fragebogen nur ausgefüllt werden kann, wenn die Consent-Box angeklickt wird. Ansonsten soll man direkt zur letzten Seite geleitet werden. Eine direkte Option dafür gibt es in der Oberfläche nicht. Allerdings verfügen wir mit unseren *R*-Kenntnissen über die nötigen Grundlagen, um die Idee dahinter zu verstehen.

Das Prinzip ist einfach: Wir können in Spreadsheet, aus dem das Survey generiert wird, eine logische Bedingung angeben. Mit dieser logischen Bedingung kann bestimmt werden, wann eine Checkbox, ein Button, ein Textfeld u. a. (nicht) angezeigt werden. Dies ermöglicht bspw. die Erstellung dynamischer Fragebögen.

formr erlaubt es innerhalb eines Runs mit der "Skip Forward" Funktionalität ganze Surveys (also Bestnadteile unseres Runs) zu überspringen, wenn bestimmte Bedingungen erfüllt sind. Nehmen wir an, wir haben ein Survey mit dem Namen `consent_only`, das nur den Aufklärungstext und die Abfrage nach der Teilnahmebereitschaft (als Variable `consent`) enthält. Wenn das Häkchen bei `consent_only$consent` nicht gesetzt wurde, springt die Versuchsperson in der Abbildung zum Abschnitt 40 des Runs (überspringt also alle Surveys dazwischen):

![](/post/formrfaq-consentskip.png)



Nach der Implementierung dieser Lösung sollte dringend nochmal die Funktionstüchtigkeit in einem Test-Run überprüft werden. Am besten gehen wir dabei beide Optionen durch: Was passiert, wenn die Consent-Checkbox nicht angeklickt wurde? Kann der Fragebogen dennoch fortgesetzt werden? Landen wir bei fehlendem Consent direkt bei der Verabschiedungsseite? Damit dabei bei einer solchen Überprüfung des Fragebogens keine Daten gespeichert werden, nutzen Sie weiterhin die Test Run"-Funktion:

![](/post/formrfaq-test-survey.jpg)


## 9. Schritt Studie veröffentlichen

Um die Umfrage zu verschicken, müssen wir sie zunächst öffentlich machen, indem wir oben rechts bei publicness auf "öffentlich" stellen. Den Link findet man oben links direkt neben der Überschrift. Mit diesem Link gelangen Proband*innen direkt zur Umfrage.

![](/post/11_study_publicness.png)

## 10. Schritt Daten herunter laden

formr bietet zwei Möglichkeiten Ergebnisse aus Survey herunterzuladen.

Für die Erste finden wir in den Einstellungen zu unserem Survey unter dem Seitenreiter "Testing & Management" den Menüpunkt "Export Results". Dieser erlaubt uns die Ergebnisse in verschiedenen Formaten herunterzuladen - unter anderem im verbreiteten `.csv` Format. Wie Daten aus diesem Format importiert werden können hatten wir bereits [in der Einführungssitzung](/post/r-crash-kurs/#daten-aus-dem-fragebogen) gesehen.

Der Nachteil dieses Vorgehens ist, dass wir uns auf eine statische Fassung der Daten einlassen müssen. Besonders wenn Sie bereits während der Erhebung damit beginnen wollen, Auswertungsskripte zu verfassen kann es aber besser sein, die Daten direkt in R von formr herunterzuladen. Der Prozess der hier beschrieben wird, wird z.B. auch in der Statistikvorlesung für die Folien mit Beispielen genutzt, die direkt während der Sitzung erhoben werden. Es muss allerdings beachtet werden, dass die Installation nicht simpel ist und einige Fehler auftreten können.

formr bietet für verschiedene Bonusfunktionalitäten das R-Paket `formr` an. Ein paar einführende Worte dazu finden Sie in der [offiziellen Dokumentation](https://formr.org/documentation#r_helpers). Leider wird das Paket derzeit (noch) nicht über CRAN vertrieben, sodass wir es nicht direkt mit `install.packages` installieren können, sondern die aktuelle [beta-Version von GitHub](https://github.com/rubenarslan/formr) nutzen müssen. Dafür sind auf Windows Rechnern einige vorbereitende Schritte nötig:

```{r, eval = FALSE}
# installr-Paket für einfaches installieren
install.packages('installr')

# Rtools installieren
installr::install.Rtools()

# devtools installieren
install.packages('devtools')
```

Wer ein MacBook oder irgendeinen anderen Rechner mit UNIX-basiertem Betriebssystem nutzt, kann die ersten beiden Schritte umgehen und einfach direkt mit `install.packages('devtools')` beginnen.

Mit dieser Voraussetzung können wir dann das `formr`-Paket installieren und laden:

```{r, eval = FALSE}
# Von GitHub installieren
devtools::install_github('rubenarslan/formr')
```
```{r}
# Paket laden
library(formr)
```
Das Paket enthält die `formr_connect()` Funktion, mit der wir R mit unserem formr Account verbinden können:

```
formr_connect()
Enter your email:
Enter your password:
```

Wenn wir die Verbindung hergestellt haben, können wir `formr_raw_results()` nutzen, um Daten direkt herunterzuladen. Dafür benötigt die Funktion lediglich den Namen unseres _Surveys_ als Argument.


Während wir die Daten aus dem Gruppenprojekt logischerweise für den Bericht brauchen, können die Daten aus der VPM Umfrage direkt verschickt werden. Nach dem Abschluss der Umfrage speichern wir den Datensatz unter einem geigneten Namen ab (z.B "Extraversion_Bildschirmzeit_Schultze.csv") und senden ihn per Mail an [Hasti Rouchi](mailto:h.rouchi@psych.uni-frankfurt.de). Auch dieser Schritt ist wichtig für die Erfüllnug der Studienleistung.



## FAQ

In diesem FAQ ("frequently asked questions") finden Sie die Antworten auf weitere Fragen im Umgang mit formr. Die Fragen stammen  in dieser oder in ähnlicher Form von Studierenden und wurden im Wintersemester 2021/2022 gesammelt. Sie sind aber für die einfache Erstellung einer Umfrage nicht essentiell.

*Dieses FAQ wird regelmäßig um neue Fragen ergänzt.*

<details><summary>Ich erhalte eine unspezifische Fehlermeldung. Woran kann das liegen?</summary>

Dies kann zahlreiche Gründe haben. Prüfen Sie bitte die folgenden Gegebenheiten:

- Leerzeichen in den Variablennamen in der Spalte `name` sind unzulässig. Eine Variable "college entrance credentials" führt entsprechend zu einem Import-Fehler. Benennen Sie die Variable z. B. um zu "college_entrance_credentials". *R* erlaubt ebenfalls keine Leerzeichen in Variablennamen.
- Umlaute, Interpunktion und sonstige Sonderzeichen sind ebenfalls unzulässig. Der Variablenname "Einführung" führt wegen des Umlautes zu einer Fehlermeldung beim Import.
- Ihre Variablennamen bzw. Elementnamen in der Spalte `name` müssen eindeutig sein (im Fachjargon spricht man auch von *diskret* oder *eineindeutig*). Haben Sie bereits eine Variable "extraversion", so können Sie kein zweites Element mit diesem Namen versehen. Normalerweise werden die Variablennamen für einzelne Items zu einem Konstrukt deshalb nach dem Schema "extra1", "extra2" etc. benannt.
- Haben Sie in Ihrem Fragen gleich viele `choice`-Optionen vergeben, wie Sie Antwortmöglichkeiten haben. Sollten Sie bspw. eine Sieben-Punkte-Likert-Skala haben, allerdings nur `choice1` bis `choice6` als Spaltennamen in der Tabelle haben, führt dies zu einem Fehler beim Import. Umgekehrt ist es nicht schlimm, wenn die Spalte `choice6` existiert, obwohl Sie eine Fünf-Punkt-Likert-Skala verwenden.
- Kontrollieren Sie, ob Ihre Tabelle weitere Tabs (unten links) hat. Standardmäßig sollten sich dort nur zwei Tabs `survey` und `choices` finden (siehe auch "Was ist eine `choices_list` und wofür nutze ich diese?").
- Speichern Sie Ihre Tabelle in einem zeitgemäßen Dateiformat. Das XLS-Format ist veraltet. Ich empfehle Ihnen, die Datei als Excel-Arbeitsmappe im XLSX-Format zu speichern. Dafür gehen Sie bitte auf "Datei" und dann auf "Speichern unter". (Auf Windows ist das entsprechende Tastenkürzel F12.) Wählen Sie anschließend im Speichern-Dialog unter "Dateiformat" die Option "Excel-Arbeitsmappe (.xlsx). Geben Sie Ihrer Datei einen Namen ohne Leer- und Sonderzeichen, z. B. "survey.xlsx". Alternativ können Sie Ihre Tabelle über Google Spreadsheet erstellen und von dort über die URL in formr importieren; dies hat zahlreiche Vorteile.
- Für die Spalte `type` muss ein Leerzeichen zwischen dem Typ-Namen und etwaigen Argumenten, z. B. `number 1,130,1` (bedeutet: Auswahl eine ganzzahlige Nummer im Bereich zwischen 1 und 130). Die Eingabe `number1,130,1` ohne Leerzeichen kann zu einem Fehler beim Import führen.
- Die zu importierende Datei darf in Ihrem Namen ebenfalls keine Leerzeichen haben. Ein Dateiname wie "tabelle 1.xlsx" kann zu einem Fehler beim Import führen. Verwenden Sie anstelle von Leerzeichen Unterstriche, z. B. "tabelle_1.xlsx".

</details>


<details><summary>Was ist eine `choices_list` und wofür nutze ich diese?</summary>

Das Argument `choice_list` für den Typ `mc` gibt den Namen eines weiteren Spreadsheets bzw. in den Haupt-Spreadsheet integrierten Tabs an, in dem Antwortmöglichkeiten gebündelt werden können. Auf diese Weise müssen nur einmal die Antwortmöglichkeiten definiert werden. Anschließend können Sie auf die gleiche Liste mit Antwortmöglichkeiten mehrfach zurückgreifen.

In dem Beispiel-Spreadsheet finden Sie unten links den entsprechenden Tab:

![](/post/formrfaq-tabs.jpg)

`choices` ist der Default-Name des Tabs, in dem sich die Antwortmöglichkeiten findet. Dieser wiederum sieht so aus:

![](/post/formrfaq-choices.jpg)

Bei **(1)** geben Sie den Namen Ihrer Liste an (in Ihrem Fall "many_choices" und darunter "time-periods"). Für die Spalte `name` unter Punkt **(2)** folgen die Variablen, die in den Datensatz geschrieben werden sollen. In die Spalte `label` unter Punkt **(3)** kommt die Bezeichnung, die den Proband\*innen im Fragebogen angezeigt wird. Ab Zeile 9 beginnt bei Punkt **(4)** eine zweite Liste mit Antwortmöglichkeiten, die den `list_name` "time_periods" trägt.

Im Fragebogen finden sich folglich für die Liste "many_choices" vier kategorische Antwortmöglichkeiten mit den Namen "saving the world", "career", "family" und "lots of icecream right now", die jeweils durch die Zahlen 1, 2, 3, und 4 kodiert sind. Gibt jemand bspw. im Fragebogen "family" an, wird in den Datensatz eine 3 geschrieben. In diesem Sinne ist diese Liste mit Antwortmöglichkeiten wie ein Variablenschlüssel. Für die Liste "time_periods" wiederum, werden ganze Strings wie "quaternary" in den Datensatz geschrieben. Als Strings werden in der Informatik Buchstabenabfolgen bezeichnet. So sind bspw. `a`, `b` und `c` isoliert betrachtet *Character*. Zusammengeführt als `abc` ergeben sie allerdings einen String. Etwas missverständlich ist, dass in *R* Strings häufig den Datentyp `character` annehmen. *R* unterscheidet nicht zwischen einem Character und einem String.

</details>

<details><summary>Wie ist mit invertierten Items umzugehen?</summary>

Invertierte Items haben eine andere Polung als nicht-invertierte Items. Sie können Sie sich dies dadurch verbildlichen, dass die Skala wie ein Zahlenstreifen an der y-Achse gespiegelt wird:

![](/post/formrfaq-invertierte-skala.png)

Invertierte Items müssen in der Auswertung wieder in die ursprüngliche Polung revertiert werden. Dies kann mittels linearer Transformation geschehen:

$$-1 \times (x_m - x_{max} - 1)$$

Bei der Erhebung invertierter Items empfehle ich Ihnen, die Invertierung in die Anmerkungen in der Spalte `explanation` zu schreiben, damit Sie dies nicht bei der Auswertung übersehen. Alternativ können Sie die Variablennamen mit einem Suffix wie "invers" versehen; dies verlängert allerdings die Variablennamen und erhöht damit die Wahrscheinlichkeit, sich bei der Eingabe dieser zu verschreiben.

</details>


<details><summary>Wie kann ich den Consent so gestalten, dass ohne diesen der Fragebogen nicht ausgefüllt werden kann?</summary>

Sie werden sicher ahnen, dass es dafür keine einfache Option in der Web-Oberfläche von formr gibt. Allerdings verfügen Sie mit Ihren *R*-Kenntnissen über die nötigen Grundlagen, um die Idee dahinter zu verstehen.

Das Prinzip ist einfach: Wir können in Spreadsheet, aus dem das Survey generiert wird, eine logische Bedingung angeben. Mit dieser logischen Bedingung kann bestimmt werden, wann eine Checkbox, ein Button, ein Textfeld u. a. (nicht) angezeigt werden. Dies ermöglicht bspw. die Erstellung dynamischer Fragebögen.

**Es gibt nun drei Möglichkeiten:**

1. Der "Weiter"-Button auf der ersten Seite des Fragebogens soll nur angezeigt werden, wenn die Variable "consent" (der Name des Consent-Buttons) auf `TRUE` steht, also die Checkbox angeklickt ist. Dies geht über die Spalte `showif` in der Zeile für den "Weiter"-Button (Typ: `submit`). Dort kann eine – wie von *R* gewohnte – Regel definiert werden, z. B. `consent == TRUE`. Nachteil: Leider kann der Fragebogen in manchen Browsern auch ohne den explizit vorgesehenen "Weiter"-Button fortgeführt werden. Sie müssen also trotzdem im Datensatz auf die Variable "consent" achten; wenn diese auf `FALSE` steht bzw. den Wert `0` anzeigt, müssen Sie die Daten löschen. Diese Implementierung erfordert somit gute Kenntnisse der Datenaufbereitung in *R*. Sie können den Datensatz in *R* danach filtern, dass nur die Zeilen ausgewertet werden, bei denen ein Consent erfolgt ist, also `consent == TRUE`. Auch hierfür gibt es mehrere Möglichkeiten - die Einfachste davon hatten wir bereits in der [ersten Sitzung](/post/r-crash-kurs/#datenextraktion) gesehen.
2. Der sichere, aber etwas umständliche Weg besteht darin, für die Einverständniserklärung und den eigentlichen Fragenbogen unterschiedliche Surveys zu definieren und diese in einem Run zusammenzuführen (siehe "Was ist der Unterschied zwischen einem _Survey_ und einem _Run_?"). formr erlaubt es dann innerhalb eines Runs mit der "Skip Forward" Funktionalität ganze Surveys zu überspringen, wenn bestimmte Bedingungen erfüllt sind. Nehmen wir an, wir haben ein Survey mit dem Namen `consent_only`, das nur den Aufklärungstext und die Abfrage nach der Teilnahmebereitschaft (als Variable `consent`) enthält. Wenn das Häkchen bei `consent_only$consent` nicht gesetzt wurde, springt die Versuchsperson in der Abbildung zum Abschnitt 40 des Runs (überspringt also alle Surveys dazwischen):

![](/post/formrfaq-consentskip.png)

3. Über die Spalte `optional` kann direkt definiert werden, wenn das Bearbeiten eines Elementes für alle nachfolgenden Elemente erforderlich ist. Sie können folglich auch einfach für die Variable "consent" bei `optional` ein Ausrufezeichen (`!`) einsetzen. Das Ausrufezeichen gibt die Notwendigkeit an. Umgekehrt kann mit einem Asterisk ("Sternchen") in der Spalte `optional` die Freiwilligkeit eines Elements verdeutlicht werden; das Item wird dann im Fragebogen als "optional" markiert.


Nach der Implementierung einer dieser Lösungen empfehle ich Ihnen dringend, deren Funktionstüchtigkeit in einem Test-Run zu überprüfen. Was passiert, wenn die Consent-Checkbox nicht angeklickt wurde? Kann der Fragebogen dennoch fortgesetzt werden? Damit dabei bei einer solchen Überprüfung des Fragebogens keine Daten gespeichert werden, nutzen Sie die "Test Survey"- bzw. "Test Run"-Funktion:

![](/post/formrfaq-test-survey.jpg)

</details>

<details><summary>Mein Datensatz sieht nicht aus, wie ich es erwartet habe. Was tun?</summary>

Dieses Problem hat meist damit zu tun, dass Ihr Datensatz im Long-Format vorliegt. Im Long-Format sind Ihre Variablen alle in einer Spalte gesammelt und jede Versuchsperson nimmt so viele Zeilen ein, wie der Datensatz über Variablen verfügt.

**Long-Format:**

| VP    | Variable | Answer |
| :---  |  :----:  | :----: |
| VP1   | Extra1   | 3      |
| VP1   | Extra2   | 4      |
| VP1   | Extra3   | 3      |
| VP1   | Vertr1   | 5      |
| VP1   | Vertr2   | 4      |
| ...   | ...      | ...    |

Im Wide-Format hingegen wird jede Versuchsperson durch eine Zeile repräsentiert und die Variablen sind spaltenweise angeordnet. Dieses Format ist üblicher und vor allem übersichtlicher. Dennoch wird hin und wieder das Long-Format benötigt (z. B. für die `ezANOVA()`-Funktion, mit der Sie sich im Rahmen von Statistik II vertraut machen).

**Wide-Format:**

|  VP  | Extra1 | Extra2 | Extra3 | Vertr1 | Vertr2 | ... |
| :--- | :----: | :----: | :----: | :----: | :----: | :-: |
| VP1  |    3   |    4   |    3   |    5   |    4   | ... |
| ...  |   ...  |   ...  |   ...  |   ...  |   ...  | ... |

Damit Sie wie gewohnt mit dem Datensatz umgehen können, müssen Sie ihn ins Wide-Format transponieren. Zur Veranschaulichung nutzen wir einen Beispieldatensatz, den R uns bereitstellt:

```{r}
data(sleep)
sleep
```

Mit `?sleep` bekommen wir Zusatzinformationen über die Daten und sehen dort, dass es sich hier um Daten aus einem Experiment handelt, bei dem die Veränderung in den Schlafstunden (`extra`) von Personen (`ID`) mit und ohne Schlafmittel (`group`) festgehalten ist. Dieser Datensatz liegt also im Long-Format vor.

Um den Datensatz aus dem Long- ins Wide-Format zu überführen können wir den Befehl `reshape` benutzen. Wie man Daten aus dem Wide- ins Long-Format umwandeln kann ist im [Beitrag zur Plot-Erstellung in BSc7](post/grafiken-mit-ggplot2/#daten-aufbereiten-reshape) dargestellt. Dort haben wir die Argumente des `reshape` Befehls näher erläutert. Hier die Zusammenfassung:

  - `data`: Der Datensatz
  - `varying`: Die Variablen die wiederholt gemessen wurden
  - `v.names`: Der Name unter dem die Variablen zusammengefasst werden sollen
  - `timevar`: Die Variable, die Wiederholungen kennzeichnet
  - `idvar`: Die Variablen, die sich über Wiederholungen nicht ändern
  - `direction`: Das Zielformat des neuen Datensatzes

Für unseren Fall benötigen wir also:

```{r}
wide <- reshape(data = sleep,
  v.names = 'extra',
  timevar = 'group',
  idvar = 'ID',
  direction = 'wide')
```

und schon haben wir einen Datensatz im Wide-Format:

```{r}
wide
```

</details>

<details><summary>Ich habe ein Bild in meinen Header eingefügt. Wie bekomme ich dieses kleiner?</summary>

Wenn Sie im "Run" unter "Settings" im Tab "CSS" folgenden Code einfügen, wird das Logo klein in die rechte Ecke gelegt:

```css
@media {
		img {float: right;
	margin: 0px 0px 10px 10px;
	height: 7%;
	max-height: 100px
		}
}
```

Mit CSS können Sie das Aussehen Ihrer HTML-Elemente anpassen. Sie können gerne an den Parametern im Code ein wenig rumspielen.
</details>


### Weitere Ressourcen

Für eine globale Übersicht über die Funktionalität von formr empfehlen wir einen Blick auf die [offizielle Dokumentation von formr](https://formr.org/documentation). Eine Möglichkeit, diese Funktionen mal an einem anderen Beispiel auszuprobieren, bietet außerdem unser [formr-Projekt](/projects/#project_06).
