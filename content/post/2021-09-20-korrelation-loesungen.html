---
title: Korrelation - Lösungen
author: 
date: '2021-01-04'
slug: korrelation-loesungen
categories:
  - BSc2
  - Loesungen
tags:
  - Korrelation
subtitle: ''
summary: ''
authors: [nehler, winkler, schroeder]
lastmod: '2021-12-13T13:34:32+01:00'
featured: no
header:
  image: "/header/BSc2_Korrelation.jpg"
  caption: "[Courtesy of pxhere](https://pxhere.com/de/photo/855019)"
projects: []
expiryDate: '2022-09-15'
publishDate: '2022-01-14'
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>


<div id="vorbereitung" class="section level2">
<h2>Vorbereitung</h2>
<p>Laden Sie den Datensatz <code>fb21</code> wie gewohnt ein.</p>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code>load(url(&#39;https://pandar.netlify.app/post/fb21.rda&#39;)) # Daten laden</code></pre>
</details>
<hr />
</div>
<div id="korrelation" class="section level1">
<h1>Korrelation</h1>
<div id="aufgabe-1" class="section level2">
<h2>Aufgabe 1</h2>
<p>In der Befragung am Anfang des Semesters wurde gefragt, ob Sie neben der Uni einen Nebenjob (<code>job</code>) ausüben und in welcher Wohnsituation Sie sich befinden (<code>wohnen</code>). Erstellen Sie für diese beiden Variablen eine Kreuztabelle mit Randsummen.</p>
<ul>
<li>Stellen Sie zunächst sicher, dass die Variablen als Faktoren vorliegen und die Kategorien beider Variablen korrekt bezeichnet sind.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code>#Labels
fb21$job &lt;- factor(fb21$job, levels = c(1, 2),
  labels = c(&#39;nein&#39;, &#39;ja&#39;))
fb21$wohnen &lt;- factor(fb21$wohnen, levels = 1:4,
     label = c(&#39;WG&#39;, &#39;bei Eltern&#39;, &#39;alleine&#39;, &#39;sonstiges&#39;))

str(fb21$job)</code></pre>
<pre><code>##  Factor w/ 2 levels &quot;nein&quot;,&quot;ja&quot;: 2 1 1 1 NA NA 1 1 2 1 ...</code></pre>
<pre class="r"><code>str(fb21$wohnen)</code></pre>
<pre><code>##  Factor w/ 4 levels &quot;WG&quot;,&quot;bei Eltern&quot;,..: 3 3 1 1 NA 2 2 3 1 4 ...</code></pre>
</details>
<ul>
<li>Wie viele Personen wohnen in einer WG und haben keinen Nebenjob?</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code># Kreuztabelle absolut
tab &lt;- table(fb21$job, fb21$wohnen)
addmargins(tab)</code></pre>
<pre><code>##       
##         WG bei Eltern alleine sonstiges Sum
##   nein  15         23      13         8  59
##   ja     9         24       8         5  46
##   Sum   24         47      21        13 105</code></pre>
<p>15 Personen wohnen in einer WG und haben keinen Nebenjob.</p>
</details>
<ul>
<li>Was ist der relative Anteil aller Teilnehmer:innen, die bei ihren Eltern wohnen?</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code># Relative Häufigkeiten, mit Randsummen
addmargins(prop.table(tab))</code></pre>
<pre><code>##       
##                WG bei Eltern    alleine  sonstiges        Sum
##   nein 0.14285714 0.21904762 0.12380952 0.07619048 0.56190476
##   ja   0.08571429 0.22857143 0.07619048 0.04761905 0.43809524
##   Sum  0.22857143 0.44761905 0.20000000 0.12380952 1.00000000</code></pre>
<p>44.76% aller Teilnehmer:innen wohnen bei ihren Eltern.</p>
</details>
<ul>
<li>Welcher Anteil der Personen, die alleine wohnen, gehen einer Nebentätigkeit nach?</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code># Relative Häufigkeiten, an wohnen normiert
prop.table(tab, 2)</code></pre>
<pre><code>##       
##               WG bei Eltern   alleine sonstiges
##   nein 0.6250000  0.4893617 0.6190476 0.6153846
##   ja   0.3750000  0.5106383 0.3809524 0.3846154</code></pre>
<p>38.1% aller Teilnehmer:innen, die alleine wohnen, gehen einer Nebentätigkeit nach.</p>
</details>
</div>
<div id="aufgabe-2" class="section level2">
<h2>Aufgabe 2</h2>
<p>Erstellen Sie für diese Kombination an Variablen ein gruppiertes Balkendiagramm.</p>
<ul>
<li>Achten Sie darauf, dass die Balken nebeneinander stehen.</li>
<li>Nutzen Sie für die Personen mit und ohne Nebenjob unterschiedliche Farben und fügen Sie eine Legende hinzu, die das verdeutlicht.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code># Gruppiertes Balkendiagramm
barplot(tab,
  beside = TRUE,             # nebeneinander
  col = c(&#39;blue&#39;, &#39;orange&#39;), # Farben definieren: Blau und Orange
  legend = rownames(tab))    # Legende einfuegen</code></pre>
<img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-6-1.png" width="672" />
</details>
</div>
<div id="aufgabe-3" class="section level2">
<h2>Aufgabe 3</h2>
<p>Welche der fünf Persönlichkeitsdimensionen Extraversion (<code>extra</code>), Verträglichkeit (<code>vertr</code>), Gewissenhaftigkeit (<code>gewis</code>), Neurotizismus (<code>neuro</code>) und Intellekt (<code>intel</code>) ist am stärksten mit der Lebenszufriedenheit korreliert (<code>lz</code>)?</p>
<ul>
<li>Überprüfen Sie die Voraussetzungen für die Pearson-Korrelation.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<p><strong>Voraussetzungen Pearson-Korrelation:</strong></p>
<ol style="list-style-type: decimal">
<li>Skalenniveau: intervallskalierte Daten <span class="math inline">\(\rightarrow\)</span> ok<br />
</li>
<li>Linearität: Zusammenhang muss linear sein <span class="math inline">\(\rightarrow\)</span> Grafische überprüfung (Scatterplot)</li>
</ol>
<pre class="r"><code># Scatterplot
plot(fb21$extra, fb21$lz, 
  xlim = c(0, 6), ylim = c(0, 7), pch = 19)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<pre class="r"><code>plot(fb21$vertr, fb21$lz, 
  xlim = c(0, 6), ylim = c(0, 7), pch = 19)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<pre class="r"><code>plot(fb21$gewis, fb21$lz, 
  xlim = c(0, 6), ylim = c(0, 7), pch = 19)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-7-3.png" width="672" /></p>
<pre class="r"><code>plot(fb21$neuro, fb21$lz, 
  xlim = c(0, 6), ylim = c(0, 7), pch = 19)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-7-4.png" width="672" /></p>
<pre class="r"><code>plot(fb21$intel, fb21$lz, 
  xlim = c(0, 6), ylim = c(0, 7), pch = 19)</code></pre>
<img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-7-5.png" width="672" />
</details>
<details>
<summary>
Lösung
</summary>
<ol start="3" style="list-style-type: decimal">
<li>Normalverteilung <span class="math inline">\(\rightarrow\)</span> QQ-Plot, Histogramm oder Shapiro-Wilk-Test</li>
</ol>
<pre class="r"><code>#QQ
qqnorm(fb21$extra)
qqline(fb21$extra)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>qqnorm(fb21$vertr)
qqline(fb21$vertr)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<pre class="r"><code>qqnorm(fb21$gewis)
qqline(fb21$gewis)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-3.png" width="672" /></p>
<pre class="r"><code>qqnorm(fb21$neuro)
qqline(fb21$neuro)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-4.png" width="672" /></p>
<pre class="r"><code>qqnorm(fb21$intel)
qqline(fb21$intel)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-5.png" width="672" /></p>
<pre class="r"><code>qqnorm(fb21$lz)
qqline(fb21$lz)</code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-6.png" width="672" /></p>
<pre class="r"><code>#Histogramm
hist(fb21$extra, prob = T, ylim = c(0, 1))
curve(dnorm(x, mean = mean(fb21$extra, na.rm = T), sd = sd(fb21$extra, na.rm = T)), col = &quot;blue&quot;, add = T)  </code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-7.png" width="672" /></p>
<pre class="r"><code>hist(fb21$vertr, prob = T, ylim = c(0, 1))
curve(dnorm(x, mean = mean(fb21$vertr, na.rm = T), sd = sd(fb21$vertr, na.rm = T)), col = &quot;blue&quot;, add = T)  </code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-8.png" width="672" /></p>
<pre class="r"><code>hist(fb21$gewis, prob = T, ylim = c(0, 1))
curve(dnorm(x, mean = mean(fb21$gewis, na.rm = T), sd = sd(fb21$gewis, na.rm = T)), col = &quot;blue&quot;, add = T)  </code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-9.png" width="672" /></p>
<pre class="r"><code>hist(fb21$neuro, prob = T, ylim = c(0, 1))
curve(dnorm(x, mean = mean(fb21$neuro, na.rm = T), sd = sd(fb21$neuro, na.rm = T)), col = &quot;blue&quot;, add = T)  </code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-10.png" width="672" /></p>
<pre class="r"><code>hist(fb21$intel, prob = T, ylim = c(0, 1))
curve(dnorm(x, mean = mean(fb21$intel, na.rm = T), sd = sd(fb21$intel, na.rm = T)), col = &quot;blue&quot;, add = T)  </code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-11.png" width="672" /></p>
<pre class="r"><code>hist(fb21$lz, prob = T, ylim = c(0, 1))
curve(dnorm(x, mean = mean(fb21$lz, na.rm = T), sd = sd(fb21$lz, na.rm = T)), col = &quot;blue&quot;, add = T)  </code></pre>
<p><img src="/post/2021-09-20-korrelation-loesungen_files/figure-html/unnamed-chunk-8-12.png" width="672" /></p>
<pre class="r"><code>#Shapiro
shapiro.test(fb21$extra)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  fb21$extra
## W = 0.97429, p-value = 0.02696</code></pre>
<pre class="r"><code>shapiro.test(fb21$vertr)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  fb21$vertr
## W = 0.95157, p-value = 0.0004162</code></pre>
<pre class="r"><code>shapiro.test(fb21$gewis)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  fb21$gewis
## W = 0.96023, p-value = 0.001855</code></pre>
<pre class="r"><code>shapiro.test(fb21$neuro)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  fb21$neuro
## W = 0.98465, p-value = 0.2192</code></pre>
<pre class="r"><code>shapiro.test(fb21$intel)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  fb21$intel
## W = 0.9743, p-value = 0.02703</code></pre>
<pre class="r"><code>shapiro.test(fb21$lz)</code></pre>
<pre><code>## 
##  Shapiro-Wilk normality test
## 
## data:  fb21$lz
## W = 0.97095, p-value = 0.0152</code></pre>
<p><span class="math inline">\(p &lt; \alpha\)</span> <span class="math inline">\(\rightarrow\)</span> H1: Normalverteilung kann für alle Variablen außer <code>neuro</code> nicht angenommen werden. Somit ist diese Voraussetzung für die meisten Variablen verletzt. Daher sollten wir fortlaufend die Rangkorrelation nach Spearman nutzen.</p>
</details>
<ul>
<li>Erstellen Sie für diese Frage eine Korrelationsmatrix, die alle Korrelationen enthält. Verwenden Sie die Funktion <code>round()</code> (unter Betrachtung der Hilfe), um die Werte auf zwei Nachkommastellen zu runden und die Tabelle dadurch übersichtlicher darzustellen.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code># Variablen in neuem Datensatz ablegen
pers &lt;- fb21[, c(&#39;lz&#39;, &#39;extra&#39;, &#39;vertr&#39;, &#39;gewis&#39;, &#39;neuro&#39;, &#39;intel&#39;)]
# Korrelationstabelle erstellen und runden
round(cor(pers, use = &quot;pairwise&quot;, method = &quot;spearman&quot;),2)</code></pre>
<pre><code>##          lz extra vertr gewis neuro intel
## lz     1.00  0.23  0.08  0.36 -0.28  0.28
## extra  0.23  1.00  0.20  0.17  0.01  0.16
## vertr  0.08  0.20  1.00  0.14  0.05  0.16
## gewis  0.36  0.17  0.14  1.00 -0.08  0.17
## neuro -0.28  0.01  0.05 -0.08  1.00 -0.05
## intel  0.28  0.16  0.16  0.17 -0.05  1.00</code></pre>
</details>
<ul>
<li>Wie würden Sie das Ausmaß dieser Korrelation nach den Richtlinien von Cohen (1988) einschätzen?</li>
</ul>
<details>
<summary>
Lösung
</summary>
<p>Die größte Korrelation mit der Lebenszufriedenheit hat die Gewissenhaftigkeit. Nach den Richtlinien ist diese mit 0.36 einem positiven mittleren Effekt, der ungefähr 0.3 beträgt, zuzuordnen.</p>
</details>
<ul>
<li>Ist der Korrelationskoeffizient von Lebenszufriedenheit und Gewissenhaftigkeit statistisch signifikant?</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code>cor.test(fb21$lz, fb21$gewis, 
         alternative = &quot;two.sided&quot;, 
         method = &quot;spearman&quot;,       
         use = &quot;complete.obs&quot;)</code></pre>
<pre><code>## Warning in cor.test.default(fb21$lz, fb21$gewis, alternative = &quot;two.sided&quot;, :
## Cannot compute exact p-value with ties</code></pre>
<pre><code>## 
##  Spearman&#39;s rank correlation rho
## 
## data:  fb21$lz and fb21$gewis
## S = 150500, p-value = 0.0001105
## alternative hypothesis: true rho is not equal to 0
## sample estimates:
##       rho 
## 0.3572125</code></pre>
<p><span class="math inline">\(p &lt; \alpha\)</span> <span class="math inline">\(\rightarrow\)</span> H1. Die Korrelation ist mit einer Irrtumswahrscheinlichkeit von 5% signifikant von 0 verschieden.</p>
</details>
</div>
<div id="aufgabe-4" class="section level2">
<h2>Aufgabe 4</h2>
<p>Berechnen sie die Pearson-Korrelation, die Spearman-Korrelation, Kendall’s Tau sowie <span class="math inline">\(\hat{\gamma}\)</span> für den Zusammenhang von <code>prok1</code> und <code>prok6</code>.</p>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code>library(rococo)</code></pre>
<pre><code>## Warning: Paket &#39;rococo&#39; wurde unter R Version 4.1.1 erstellt</code></pre>
<pre class="r"><code>cor(fb21$prok1, fb21$prok6, method = &quot;pearson&quot;)</code></pre>
<pre><code>## [1] 0.2508115</code></pre>
<pre class="r"><code>cor(fb21$prok1, fb21$prok6, method = &quot;spearman&quot;)</code></pre>
<pre><code>## [1] 0.2507723</code></pre>
<pre class="r"><code>cor(fb21$prok1, fb21$prok6, method = &quot;kendall&quot;)</code></pre>
<pre><code>## [1] 0.2240004</code></pre>
<pre class="r"><code>rococo(fb21$prok1, fb21$prok6)</code></pre>
<pre><code>## [1] 0.3118613</code></pre>
</details>
</div>
<div id="aufgabe-5" class="section level2">
<h2>Aufgabe 5</h2>
<p>Das Paket <code>psych</code> enthält vielerlei Funktionen, die für die Analyse von Datensätzen aus psychologischer Forschung praktisch sind. Eine von ihnen (<code>describe()</code>) erlaubt es, gleichzeitig verschiedene Deskriptivstatistiken für Variablen zu erstellen.</p>
<ul>
<li>Installieren und laden Sie das Paket <code>psych</code>.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code># Paket installieren
install.packages(&#39;psych&#39;)</code></pre>
<pre class="r"><code># Paket laden
library(psych)</code></pre>
</details>
<ul>
<li>Nutzen Sie den neugewonnen Befehl <code>describe()</code>, um sich gleichzeitig die verschiedenen Deskriptivstatistiken für Lebenszufriedenheit (<code>lz</code>) ausgeben zu lassen.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code>describe(pers$lz)</code></pre>
<pre><code>##    vars   n mean   sd median trimmed  mad min max range  skew kurtosis   se
## X1    1 112 4.99 1.13    5.1    5.05 1.04 1.6   7   5.4 -0.54     0.02 0.11</code></pre>
</details>
<ul>
<li><code>describe()</code> kann auch genutzt werden, um gleichzeitig Deskriptivstatistiken für verschiedene Variablen zu berechnen. Nutzen Sie diese Funktionalität, um sich gleichzeitg die univariaten Deskriptivstatistiken für die fünf Persönlichkeitsdimensionen ausgeben zu lassen.</li>
</ul>
<details>
<summary>
Lösung
</summary>
<pre class="r"><code>describe(pers[,-1]) #Spalte für `lz` wird ausgeschlossen</code></pre>
<pre><code>##       vars   n mean   sd median trimmed  mad  min max range  skew kurtosis   se
## extra    1 114 3.33 0.75   3.50    3.34 0.74 1.25   5  3.75 -0.23    -0.46 0.07
## vertr    2 114 4.17 0.52   4.25    4.20 0.37 2.75   5  2.25 -0.50    -0.11 0.05
## gewis    3 114 3.96 0.66   4.00    3.99 0.74 2.00   5  3.00 -0.44    -0.33 0.06
## neuro    4 114 3.40 0.78   3.38    3.40 0.74 1.25   5  3.75 -0.08    -0.25 0.07
## intel    5 114 3.64 0.64   3.75    3.65 0.74 2.00   5  3.00 -0.15    -0.59 0.06</code></pre>
<pre class="r"><code>#Alternativ
describe(pers[,c(&quot;extra&quot;,&quot;vertr&quot;,&quot;gewis&quot;,&quot;neuro&quot;,&quot;intel&quot;)])</code></pre>
<pre><code>##       vars   n mean   sd median trimmed  mad  min max range  skew kurtosis   se
## extra    1 114 3.33 0.75   3.50    3.34 0.74 1.25   5  3.75 -0.23    -0.46 0.07
## vertr    2 114 4.17 0.52   4.25    4.20 0.37 2.75   5  2.25 -0.50    -0.11 0.05
## gewis    3 114 3.96 0.66   4.00    3.99 0.74 2.00   5  3.00 -0.44    -0.33 0.06
## neuro    4 114 3.40 0.78   3.38    3.40 0.74 1.25   5  3.75 -0.08    -0.25 0.07
## intel    5 114 3.64 0.64   3.75    3.65 0.74 2.00   5  3.00 -0.15    -0.59 0.06</code></pre>
</details>
<hr />
</div>
</div>
